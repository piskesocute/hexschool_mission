"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[329],{422:function(t,e,a){function s(t){return{all:t=t||new Map,on:function(e,a){var s=t.get(e);s?s.push(a):t.set(e,[a])},off:function(e,a){var s=t.get(e);s&&(a?s.splice(s.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var s=t.get(e);s&&s.slice().map((function(t){t(a)})),(s=t.get("*"))&&s.slice().map((function(t){t(e,a)}))}}}a.d(e,{Z:function(){return n}});const c=s();var n=c},3329:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});var s=a(3396),c=a(7139),n=a(9242);const i=(0,s._)("h1",null,"cart",-1),r={class:"container"},l={class:"text-end"},o={class:"table align-middle"},u=(0,s._)("thead",null,[(0,s._)("tr",{class:"text-center"},[(0,s._)("th",{width:"5%"}),(0,s._)("th",{width:"10%"},"圖片"),(0,s._)("th",{width:"35%"},"品名"),(0,s._)("th",{width:"10%"},"售價"),(0,s._)("th",{width:"10%"},"單價"),(0,s._)("th",{width:"10%"},"折扣"),(0,s._)("th",{width:"10%"},"數量/單位"),(0,s._)("th",null,"總價")])],-1),d={class:"d-flex justify-content-center align-items-center"},p=["onClick"],h=(0,s._)("i",{class:"fas fa-spinner fa-pulse"},null,-1),_=(0,s.Uk)(" x "),m=[h,_],g={class:"align-middle"},v={class:"d-flex justify-content-center align-items-center"},f={class:"mx-0 my-auto overflow-hidden"},w=["src"],x={class:"text-center"},y={class:"text-center fs-5"},k={class:"text-center"},b={key:0,class:"text-success"},C={class:"input-group input-group-sm"},D={class:"input-group mb-3"},I=["onUpdate:modelValue","onChange"],$=["value"],q={class:"text-center fs-5"},z=(0,s._)("td",{colspan:"7",class:"text-end"},"總計",-1),U={class:"text-center fs-5"};function Z(t,e,a,h,_,Z){return(0,s.wg)(),(0,s.iD)(s.HY,null,[i,(0,s._)("div",r,[(0,s._)("div",l,[(0,s._)("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=t=>Z.removeCartItem())}," 清空購物車 ")]),(0,s._)("table",o,[u,(0,s._)("tbody",null,[_.cartData.carts?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(_.cartData.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id},[(0,s._)("td",null,[(0,s._)("div",d,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>Z.removeCartItem(t.id)},m,8,p)])]),(0,s._)("td",g,[(0,s._)("div",v,[(0,s._)("div",f,[(0,s._)("img",{style:{"max-height":"80px",display:"block"},src:t.product.imageUrl||t.product.imagesUrl[0],alt:""},null,8,w)])])]),(0,s._)("td",null,(0,c.zw)(t.product.title),1),(0,s._)("td",x,(0,c.zw)(t.product.origin_price),1),(0,s._)("td",y,(0,c.zw)(t.product.price),1),(0,s._)("td",k,[t.product.price-t.product.origin_price!==0?((0,s.wg)(),(0,s.iD)("small",b,"省下：")):(0,s.kq)("",!0),(0,s.Uk)((0,c.zw)(t.product.price-t.product.origin_price),1)]),(0,s._)("td",null,[(0,s._)("div",C,[(0,s._)("div",D,[(0,s.wy)((0,s._)("select",{class:"form-select",id:"","onUpdate:modelValue":e=>t.qty=e,onChange:e=>Z.updateCartItem(t)},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(10,(t=>(0,s._)("option",{value:t,key:t+"12312341323"},(0,c.zw)(t),9,$))),64))],40,I),[[n.bM,t.qty]])])])]),(0,s._)("td",q,(0,c.zw)(t.total),1)])))),128)):(0,s.kq)("",!0)]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[z,(0,s._)("td",U,(0,c.zw)(_.cartData.final_total),1)])])])])],64)}var H=a(422),Y={data(){return{data:[],product:{},cartData:{},page:"1",modal:{},productId:"",orderData:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCartItem(){this.$http("https://vue3-course-api.hexschool.io/v2/api/evan-classuse/cart").then((t=>{this.cartData=t.data.data})).catch((()=>{}))},removeCartItem(t){let e=`cart/${t}`;"string"!==typeof t&&(e="carts"),this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/evan-classuse/${e}`).then((()=>{H.Z.emit("get-cart"),this.getCartItem()})).catch((()=>{}))},updateCartItem(t){const e={product_id:t.id,qty:t.qty};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/cart/${t.id}`,{data:e}).then((()=>{this.getCartItem()})).catch((()=>{}))},getproduct(){this.$http("https://vue3-course-api.hexschool.io/v2/api/evan-classuse/products/all").then((t=>{this.data=t.data.products})).catch((()=>{}))},addToCart(t,e=1){const a={product_id:t,qty:e};this.$http.post("https://vue3-course-api.hexschool.io/v2/api/evan-classuse/cart",{data:a}).then((()=>{H.Z.emit("get-cart")})).catch((()=>{}))}},mounted(){this.getproduct(),this.getCartItem()}},j=a(89);const K=(0,j.Z)(Y,[["render",Z]]);var M=K}}]);
//# sourceMappingURL=329.3ef0bed4.js.map