"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[37],{4942:function(t,l,e){e.d(l,{Z:function(){return L}});var o=e(3396),s=e(7139);const a={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},i={class:"modal-dialog modal-dialog-centered"},d={class:"modal-content"},n=(0,o._)("div",{class:"modal-header bg-danger"},[(0,o._)("h5",{class:"modal-title fw-bolder text-light",id:"exampleModalLabel"}," 注意! ")],-1),c={class:"modal-body my-3"},r=(0,o._)("p",{class:"fs-5 border-bottom border-2"},"準備刪除下列項目",-1),u={style:{"list-style-type":"none"},class:"text-primary text-opacity-75"},p=(0,o._)("b",null,"項目標題：",-1),m=(0,o._)("b",null,"項目ID：",-1),b={class:"modal-footer d-flex"},h=(0,o._)("p",{class:"me-auto"},"確認無誤後，請按下刪除鍵",-1);function _(t,l,e,_,g,f){return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",i,[(0,o._)("div",d,[n,(0,o._)("div",c,[r,(0,o._)("ul",u,[(0,o._)("li",null,[p,(0,o.Uk)((0,s.zw)(e.item.title),1)]),(0,o._)("li",null,[m,(0,o.Uk)((0,s.zw)(e.item.id),1)])])]),(0,o._)("div",b,[h,(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:l[0]||(l[0]=t=>f.hideModal())}," 返回 "),(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:l[1]||(l[1]=l=>t.$emit("del-item"))}," 確定刪除 ")])])])],512)}var g=e(7972),f=e.n(g),w={data(){return{modal:""}},props:{item:{}},emits:["del-item"],methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(f())(this.$refs.modal)}},y=e(89);const v=(0,y.Z)(w,[["render",_]]);var L=v},1037:function(t,l,e){e.r(l),e.d(l,{default:function(){return Zt}});var o=e(3396),s=e(7139);const a=t=>((0,o.dD)("data-v-508ccbe1"),t=t(),(0,o.Cn)(),t),i={class:"text-end mt-4"},d={class:"table mt-4 text-center"},n=a((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"預覽圖"),(0,o._)("th",null,"產品名稱"),(0,o._)("th",null,"產品類別"),(0,o._)("th",null,"原價"),(0,o._)("th",null,"售價"),(0,o._)("th",null,"商品狀態"),(0,o._)("th")])],-1))),c={width:"10%"},r={class:"d-flex justify-content-center align-items-center"},u={class:"w-75 mx-0 my-auto"},p=["src"],m=["src"],b={key:2},h={width:"10%"},_={width:"10%"},g={width:"10%"},f={width:"10%"},w={width:"10%"},y={key:0,class:"badge rounded-pill bg-danger fs-6"},v={key:1,class:"badge rounded-pill bg-success fs-6 fw"},L={key:2,class:"badge rounded-pill bg-secondary fs-6"},x={width:"20%",class:""},k={class:"btn-group",role:"group","aria-label":"Basic example"},U=["onClick"],M=["onClick"];function D(t,l,e,a,D,C){const P=(0,o.up)("Loading"),$=(0,o.up)("Pagination"),z=(0,o.up)("EditModal"),V=(0,o.up)("DeleteModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(P,{active:D.isLoading,"z-index":1060},null,8,["active"]),(0,o._)("div",i,[(0,o._)("button",{class:"btn btn-primary",type:"button",onClick:l[0]||(l[0]=t=>C.openModal(!0))}," 建立新的產品 ")]),(0,o.Wm)($,{pages:D.pagination,onChangePage:C.getProduct},null,8,["pages","onChangePage"]),(0,o._)("table",d,[n,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id,class:"align-middle"},[(0,o._)("td",c,[(0,o._)("div",r,[(0,o._)("div",u,[t.imageUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"",src:t.imageUrl,alt:""},null,8,p)):!t.imageUrl&&t.imagesUrl?((0,o.wg)(),(0,o.iD)("img",{key:1,class:"",src:t.imagesUrl[0],alt:""},null,8,m)):((0,o.wg)(),(0,o.iD)("span",b,"無圖片 "))])])]),(0,o._)("td",h,(0,s.zw)(t.title),1),(0,o._)("td",_,(0,s.zw)(t.category),1),(0,o._)("td",g,(0,s.zw)(t.origin_price),1),(0,o._)("td",f,(0,s.zw)(t.price),1),(0,o._)("td",w,[2===t.is_enabled?((0,o.wg)(),(0,o.iD)("span",y,"已售完")):1===t.is_enabled?((0,o.wg)(),(0,o.iD)("span",v,"銷售中")):0===t.is_enabled?((0,o.wg)(),(0,o.iD)("span",L,"下架")):(0,o.kq)("",!0)]),(0,o._)("td",x,[(0,o._)("div",k,[(0,o._)("button",{type:"button",class:"btn btn-outline-primary",onClick:l=>C.openModal(!1,t)}," 查看 ",8,U),(0,o._)("button",{type:"button",class:"btn btn-outline-danger",onClick:l=>C.openDelModal(t)}," 刪除 ",8,M)])])])))),128))])]),(0,o.Wm)(z,{product:D.productList,onPushData:C.pushdata,ref:"productModal"},null,8,["product","onPushData"]),(0,o.Wm)(V,{item:D.productList,ref:"deleteModal",onDelItem:C.deleteData},null,8,["item","onDelItem"])],64)}var C=e(3628),P=e(9242);const $={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},z={class:"modal-dialog modal-xl"},V={class:"modal-content"},N=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title",id:"staticBackdropLabel"},"編輯商品"),(0,o._)("button",{type:"button",class:"btn-close","aria-label":"Close","data-bs-dismiss":"modal"})],-1),Z={class:"modal-body"},j={class:"container-fluid"},q={class:"d-flex"},E={class:"col-5 h5 fw-bold mb-1"},I=(0,o.Uk)(" 新增圖片 "),W={class:"d-flex flex-column",style:{height:"600px","overflow-y":"scroll"}},B={class:""},H={key:0,class:"ms-3 text-primary"},O={class:"w-100 d-flex p-2"},Y=["onUpdate:modelValue"],J=["onClick","disabled"],K=["src"],S={class:"col-7"},T={class:"row ps-3 mb-2"},A={class:""},F=(0,o._)("label",{for:"productName",class:"form-label h5 fw-bold mb-1"},"產品名稱",-1),G={class:"row ps-3 mb-2"},Q={class:"col-4"},R=(0,o._)("label",{for:"productType",class:"form-label h5 fw-bold mb-1"},"產品分類",-1),X={class:"col-4"},tt=(0,o._)("label",{for:"productEnable",class:"form-label h5 fw-bold mb-1"},"產品狀態",-1),lt=(0,o._)("option",{selected:""},"請選擇產品狀態",-1),et=(0,o._)("option",{value:"0"},"下架",-1),ot=(0,o._)("option",{value:"1"},"上架",-1),st=(0,o._)("option",{value:"2"},"售完",-1),at=[lt,et,ot,st],it={class:"col-4"},dt=(0,o._)("label",{for:"Price",class:"form-label h5 fw-bold mb-1"},"商品單位",-1),nt={class:"row ps-3 mb-2"},ct={class:"col-4"},rt=(0,o._)("label",{for:"originPrice",class:"form-label h5 fw-bold mb-1"},"原價",-1),ut={class:"col-4"},pt=(0,o._)("label",{for:"Price",class:"form-label h5 fw-bold mb-1"},"售價",-1),mt={class:"col-4"},bt=(0,o._)("label",{for:"Price",class:"form-label h5 fw-bold mb-1"},"庫存數量",-1),ht={class:"row ps-3 mb-2"},_t={class:"col-12"},gt=(0,o._)("label",{for:"productContent",class:"form-label h5 fw-bold mb-1"},"商品內容",-1),ft={class:"row ps-3 mb-2"},wt={class:"col-12"},yt=(0,o._)("label",{for:"productContent",class:"form-label h5 fw-bold mb-1"},"商品描述",-1),vt={class:"modal-footer"},Lt={class:"col-3 px-3 me-auto"},xt={class:"d-flex justify-content-between col-3"},kt=(0,o._)("button",{type:"button",class:"btn btn-secondary col-4","data-bs-dismiss":"modal"}," 返回 ",-1);function Ut(t,l,e,a,i,d){return(0,o.wg)(),(0,o.iD)("div",$,[(0,o._)("div",z,[(0,o._)("div",V,[N,(0,o._)("div",Z,[(0,o._)("div",j,[(0,o._)("div",q,[(0,o._)("div",E,[I,(0,o._)("div",W,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.productList.imagesUrl,((t,l)=>((0,o.wg)(),(0,o.iD)("div",{key:t+132152,class:"my-3 ps-0 pe-1 pb-3 fw-normal fs-6 border-bottom"},[(0,o._)("span",B,"第"+(0,s.zw)(l+1)+"張",1),0==l?((0,o.wg)(),(0,o.iD)("span",H," 此為主圖")):(0,o.kq)("",!0),(0,o._)("div",O,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control flex-grow-1","onUpdate:modelValue":t=>i.productList.imagesUrl[l]=t,style:{float:"left"}},null,8,Y),[[P.nr,i.productList.imagesUrl[l],void 0,{lazy:!0,trim:!0}]]),(0,o._)("button",{class:"btn btn-danger col-2 ms-2",type:"button",id:"button-addon2",onClick:t=>i.productList.imagesUrl.splice(l,1),disabled:""==i.productList.imagesUrl[l]||i.productList.imagesUrl?.length-1<=0}," 刪除 ",8,J)]),(0,o._)("img",{class:"w-100",src:i.productList.imagesUrl[l],alt:""},null,8,K)])))),128))])]),(0,o._)("div",S,[(0,o._)("div",T,[(0,o._)("div",A,[F,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"productName",placeholder:"請輸入商品名稱","onUpdate:modelValue":l[0]||(l[0]=t=>i.productList.title=t)},null,512),[[P.nr,i.productList.title]])])]),(0,o._)("div",G,[(0,o._)("div",Q,[R,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"productType",placeholder:"請輸入產品分類:","onUpdate:modelValue":l[1]||(l[1]=t=>i.productList.category=t)},null,512),[[P.nr,i.productList.category]])]),(0,o._)("div",X,[tt,(0,o.wy)((0,o._)("select",{class:"form-select","aria-label":"Default select example",id:"productEnable","onUpdate:modelValue":l[2]||(l[2]=t=>i.productList.is_enabled=t)},at,512),[[P.bM,i.productList.is_enabled,void 0,{number:!0}]])]),(0,o._)("div",it,[dt,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"Price",placeholder:"商品單位","onUpdate:modelValue":l[3]||(l[3]=t=>i.productList.unit=t)},null,512),[[P.nr,i.productList.unit]])])]),(0,o._)("div",nt,[(0,o._)("div",ct,[rt,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"originPrice",placeholder:"元","onUpdate:modelValue":l[4]||(l[4]=t=>i.productList.origin_price=t)},null,512),[[P.nr,i.productList.origin_price]])]),(0,o._)("div",ut,[pt,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"Price",placeholder:"元","onUpdate:modelValue":l[5]||(l[5]=t=>i.productList.price=t)},null,512),[[P.nr,i.productList.price]])]),(0,o._)("div",mt,[bt,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"Price",placeholder:"商品單位","onUpdate:modelValue":l[6]||(l[6]=t=>i.productList.quantity=t)},null,512),[[P.nr,i.productList.quantity]])])]),(0,o._)("div",ht,[(0,o._)("div",_t,[gt,(0,o.wy)((0,o._)("textarea",{class:"form-control overflow-auto align-self-stretch",placeholder:"商品內容",id:"productContent","onUpdate:modelValue":l[7]||(l[7]=t=>i.productList.content=t),style:{height:"100px",resize:"none","text-align":"justify"}},null,512),[[P.nr,i.productList.content]])])]),(0,o._)("div",ft,[(0,o._)("div",wt,[yt,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":l[8]||(l[8]=t=>i.productList.description=t),class:"form-control overflow-auto align-self-stretch",placeholder:"請詳細描述商品",id:"productContent",style:{height:"200px",resize:"none","text-align":"justify"}},null,512),[[P.nr,i.productList.description]])])])])])])]),(0,o._)("div",vt,[(0,o._)("div",Lt,[(0,o._)("button",{class:"btn btn-primary w-100",type:"button",id:"button-addon2",onClick:l[9]||(l[9]=t=>i.productList.imagesUrl.push(""))}," 新增圖片 ")]),(0,o._)("div",xt,[kt,(0,o._)("button",{type:"button",class:"btn btn-primary col-6",onClick:l[10]||(l[10]=l=>t.$emit("push-data",i.productList))}," 送出 ")])])])])],512)}var Mt=e(7995),Dt={props:{product:{type:Object,default(){return{}}},isNew:{type:Boolean,default:!1}},data(){return{status:{},modal:"",productList:{}}},emits:["push-data"],mixins:[Mt.Z],inject:["emitter"],watch:{product(){this.productList=this.product,this.productList.imagesUrl||(this.productList.imagesUrl=[]),this.productList.imageUrl||(this.productList.imageUrl="")}},methods:{closeModal(){const t=this.$refs.modal;t.hideModal()}}},Ct=e(89);const Pt=(0,Ct.Z)(Dt,[["render",Ut]]);var $t=Pt,zt=e(4942),Vt={data(){return{products:[],pagination:{},nowPage:1,isNew:!1,productList:{},isLoading:!1}},components:{Pagination:C.Z,EditModal:$t,DeleteModal:zt.Z},methods:{getProduct(t=1){this.isLoading=!0,this.nowPage=t;const l=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/products?page=${t}`;this.$http.get(l).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1})).catch((t=>{console.dir(t),this.isLoading=!1}))},openModal(t,l){t?(this.productList={},this.isNew=!0):(this.productList=JSON.parse(JSON.stringify(l)),this.isNew=!1);const e=this.$refs.productModal;e.openModal()},openDelModal(t){this.productList={...t};const{deleteModal:l}=this.$refs;l.openModal()},pushdata(t){this.isLoading=!0,this.productList=t;let l="https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/product",e="post";this.isNew||(l=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/product/${this.productList.id}`,e="put");const o=this.$refs.productModal;this.$http[e](l,{data:this.productList}).then((()=>{o.hideModal(),this.getProduct(this.nowPage),this.isLoading=!1})).catch((t=>{console.dir(t),this.isLoading=!1}))},deleteData(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/v2//api/evan-classuse/admin/product/${this.productList.id}`;this.$http.delete(t).then((()=>{const{deleteModal:t}=this.$refs;this.isLoading=!1,t.hideModal()})).catch((t=>{console.dir(t),this.isLoading=!1}))}},created(){this.getProduct()}};const Nt=(0,Ct.Z)(Vt,[["render",D],["__scopeId","data-v-508ccbe1"]]);var Zt=Nt}}]);
//# sourceMappingURL=37.931b1806.js.map