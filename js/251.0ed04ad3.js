"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[251],{5251:function(e,t,l){l.r(t),l.d(t,{default:function(){return ye}});var d=l(3396),r=l(7139),o=l(9242);const s={class:"table text-center align-middle"},a=(0,d._)("thead",{class:"text-center"},[(0,d._)("tr",null,[(0,d._)("th",{width:"5%",scope:"col"},"訂單日期"),(0,d._)("th",{width:"5%",scope:"col"},"電話"),(0,d._)("th",{width:"15%",scope:"col"},"寄運地址"),(0,d._)("th",{width:"5%",scope:"col"},"金額"),(0,d._)("th",{width:"5%",scope:"col"},"付款狀態"),(0,d._)("th",{width:"10%",scope:"col"},"操作")])],-1),i={class:""},n={class:"form-check form-switch d-flex justify-content-center"},c=["onUpdate:modelValue","onChange"],u={class:"btn-group",role:"group"},h=["onClick"],p=["onClick"];function _(e,t,l,_,m,b){const w=(0,d.up)("Loading"),g=(0,d.up)("OrderModal"),f=(0,d.up)("DeleteOrderModal"),L=(0,d.up)("Pagination");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(w,{active:m.isLoading,"z-index":1060},null,8,["active"]),(0,d.Wm)(g,{order:m.orderList,ref:"orderModal",onUpdateOrder:b.updateOrder},null,8,["order","onUpdateOrder"]),(0,d.Wm)(f,{ref:"delOrderModal","del-order":m.orderList,onDelItem:b.delOrder},null,8,["del-order","onDelItem"]),(0,d.Wm)(L,{pages:m.pagination,onChangePage:b.getOrderList},null,8,["pages","onChangePage"]),(0,d._)("table",s,[a,(0,d._)("tbody",null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(m.order,((t,l)=>((0,d.wg)(),(0,d.iD)("tr",{key:l},[(0,d._)("td",null,(0,r.zw)(e.$filters.date(t.create_at)),1),(0,d._)("td",null,(0,r.zw)(t.user.tel),1),(0,d._)("td",null,(0,r.zw)(t.user.address),1),(0,d._)("td",null,(0,r.zw)(t.total),1),(0,d._)("td",i,[(0,d._)("div",n,[(0,d.wy)((0,d._)("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e=>t.is_paid=e,onChange:e=>b.updateOrder(t)},null,40,c),[[o.e8,t.is_paid]])])]),(0,d._)("td",null,[(0,d._)("div",u,[(0,d._)("button",{type:"button",class:"btn btn-outline-primary",onClick:e=>b.openOrderModal(t)}," 編輯 ",8,h),(0,d._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>b.opendelOrderModal(t)}," 刪除 ",8,p)])])])))),128))])])],64)}var m=l(3628);const b=e=>((0,d.dD)("data-v-897b7920"),e=e(),(0,d.Cn)(),e),w={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},g={class:"modal-dialog modal-xl"},f={class:"modal-content"},L=b((()=>(0,d._)("div",{class:"modal-header"},[(0,d._)("h5",{class:"modal-title",id:"exampleModalLabel"},"訂單內容"),(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),v={class:"modal-body"},y={class:"mb-3"},k=b((()=>(0,d._)("h5",null,"訂購人資訊",-1))),O={class:"row border-bottom mb-3"},x={class:"col-md-3 mb-2"},M=b((()=>(0,d._)("label",{for:"username",class:"form-label"},"訂購人姓名",-1))),C={class:"col-md-3 mb-2"},D=b((()=>(0,d._)("label",{for:"usertel",class:"form-label"},"電話",-1))),$={class:"col-md-6 mb-2"},z=b((()=>(0,d._)("label",{for:"useremail",class:"form-label"},"信箱",-1))),U={class:"mb-3"},I=b((()=>(0,d._)("label",{for:"useraddress",class:"form-label"},"地址",-1))),P={class:"row border-end"},V={class:"col-md-7"},Z=b((()=>(0,d._)("h5",null,"訂購商品",-1))),W={class:"table"},j=b((()=>(0,d._)("thead",{class:"text-center"},[(0,d._)("tr",null,[(0,d._)("th",{scope:"col"},"商品名稱"),(0,d._)("th",{scope:"col",width:"20%"},"商品數量"),(0,d._)("th",{scope:"col",width:"15%"},"金額")])],-1))),H={class:"col-md-5"},Y=b((()=>(0,d._)("h5",null,"訂單狀態",-1))),K={class:"table"},S=b((()=>(0,d._)("thead",null,null,-1))),q=b((()=>(0,d._)("th",{scope:"row",width:"30%"},"訂單編號",-1))),A=b((()=>(0,d._)("th",{scope:"row",width:"30%"},"訂單日期",-1))),B=b((()=>(0,d._)("th",{scope:"row",width:"30%"},"付款日期",-1))),E={key:0},F={key:1},G=b((()=>(0,d._)("th",{scope:"row",width:"30%"},"付款狀態",-1))),J={class:"form-check form-switch"},N=b((()=>(0,d._)("th",{scope:"row",width:"30%"},"結帳金額",-1))),Q={class:"modal-footer"},R=b((()=>(0,d._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1)));function T(e,t,l,s,a,i){return(0,d.wg)(),(0,d.iD)("div",w,[(0,d._)("div",g,[(0,d._)("div",f,[L,(0,d._)("div",v,[(0,d._)("div",y,[k,(0,d._)("div",O,[(0,d._)("div",x,[M,(0,d.wy)((0,d._)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>a.orderList.user.name=e)},null,512),[[o.nr,a.orderList.user.name]])]),(0,d._)("div",C,[D,(0,d.wy)((0,d._)("input",{type:"tel",class:"form-control",id:"usertel",placeholder:"0912345678","onUpdate:modelValue":t[1]||(t[1]=e=>a.orderList.user.tel=e)},null,512),[[o.nr,a.orderList.user.tel]])]),(0,d._)("div",$,[z,(0,d.wy)((0,d._)("input",{type:"email",class:"form-control",id:"useremail",placeholder:"name@example.com","onUpdate:modelValue":t[2]||(t[2]=e=>a.orderList.user.email=e)},null,512),[[o.nr,a.orderList.user.email]])]),(0,d._)("div",U,[I,(0,d.wy)((0,d._)("input",{type:"text",class:"form-control",id:"useraddress",placeholder:"台北市","onUpdate:modelValue":t[3]||(t[3]=e=>a.orderList.user.address=e)},null,512),[[o.nr,a.orderList.user.address]])])]),(0,d._)("div",P,[(0,d._)("div",V,[Z,(0,d._)("table",W,[j,(0,d._)("tbody",null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(a.orderList.products,((e,t)=>((0,d.wg)(),(0,d.iD)("tr",{key:t},[(0,d._)("td",null,(0,r.zw)(e.product.title),1),(0,d._)("td",null,(0,r.zw)(e.qty),1),(0,d._)("td",null,(0,r.zw)(e.total),1)])))),128))])])]),(0,d._)("div",H,[Y,(0,d._)("table",K,[S,(0,d._)("tbody",null,[(0,d._)("tr",null,[q,(0,d._)("td",null,(0,r.zw)(a.orderList.id),1)]),(0,d._)("tr",null,[A,(0,d._)("td",null,(0,r.zw)(e.$filters.date(a.orderList.create_at)),1)]),(0,d._)("tr",null,[B,(0,d._)("td",null,[a.orderList.paid_date?((0,d.wg)(),(0,d.iD)("span",E,(0,r.zw)(e.$filters.date(a.orderList.paid_date)),1)):((0,d.wg)(),(0,d.iD)("span",F,"尚未付款"))])]),(0,d._)("tr",null,[G,(0,d._)("td",null,[(0,d._)("div",J,[(0,d.wy)((0,d._)("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":t[4]||(t[4]=e=>a.orderList.is_paid=e)},null,512),[[o.e8,a.orderList.is_paid]])])])]),(0,d._)("tr",null,[N,(0,d._)("td",null,(0,r.zw)(e.$filters.currency(a.orderList.total)),1)])])])])])])]),(0,d._)("div",Q,[R,(0,d._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=t=>e.$emit("update-order",a.orderList))}," 更改訂單狀態 ")])])])],512)}var X=l(7995),ee={data(){return{orderList:{products:{},user:{}}}},props:{order:{type:Object,default(){return{}}}},emits:["update-order"],watch:{order(){this.orderList=this.order}},mixins:[X.Z]},te=l(89);const le=(0,te.Z)(ee,[["render",T],["__scopeId","data-v-897b7920"]]);var de=le;const re={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},oe={class:"modal-dialog modal-dialog-centered"},se={class:"modal-content"},ae=(0,d._)("div",{class:"modal-header bg-danger"},[(0,d._)("h5",{class:"modal-title fw-bolder text-light",id:"exampleModalLabel"}," 注意! ")],-1),ie={class:"modal-body mt-3"},ne=(0,d._)("p",{class:"fs-5 border-bottom border-2"},"準備刪除下列項目",-1),ce={style:{"list-style-type":"none"},class:""},ue=(0,d._)("b",null,"訂單ID：",-1),he=(0,d._)("b",null,"訂單持有人：",-1),pe=(0,d._)("b",null,"訂單金額：",-1),_e={class:"modal-footer d-flex"},me=(0,d._)("p",{class:"me-auto"},"確認無誤後，請按下刪除鍵",-1);function be(e,t,l,o,s,a){return(0,d.wg)(),(0,d.iD)("div",re,[(0,d._)("div",oe,[(0,d._)("div",se,[ae,(0,d._)("div",ie,[ne,(0,d._)("ul",ce,[(0,d._)("li",null,[ue,(0,d.Uk)((0,r.zw)(s.delItem.id),1)]),(0,d._)("li",null,[he,(0,d.Uk)((0,r.zw)(s.delItem.user.name),1)]),(0,d._)("li",null,[pe,(0,d.Uk)((0,r.zw)(e.$filters.currency(s.delItem.total)),1)])])]),(0,d._)("div",_e,[me,(0,d._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=t=>e.hideModal())}," 返回 "),(0,d._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=t=>e.$emit("del-item"))}," 確定刪除 ")])])])],512)}var we={data(){return{delItem:{user:{}}}},mixins:[X.Z],props:{delOrder:{type:Object,default(){return{}}}},watch:{delOrder(){this.delItem=this.delOrder}},emits:["del-item"],methods:{},mounted(){}};const ge=(0,te.Z)(we,[["render",be]]);var fe=ge,Le={data(){return{order:[],pagination:{products:{},user:{}},nowPage:1,orderList:{},isLoading:!1}},components:{Pagination:m.Z,OrderModal:de,DeleteOrderModal:fe},methods:{getOrderList(e=1){this.isLoading=!0,this.nowPage=e;const t=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/orders/?page=${this.nowPage}`;this.$http.get(t).then((e=>{this.pagination=e.data.pagination,this.order=e.data.orders,this.isLoading=!1})).catch((e=>{console.dir(e),this.isLoading=!1}))},openOrderModal(e){this.orderList=e;const t=this.$refs.orderModal;t.openModal()},updateOrder(e){this.isLoading=!0,this.orderList=e;const t=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/order/${this.orderList.id}/`,l=this.$refs.orderModal;this.$http.put(t,{data:this.orderList}).then((()=>{this.getOrderList(),l.hideModal(),this.isLoading=!1})).catch((e=>{console.dir(e),this.isLoading=!1}))},opendelOrderModal(e){this.orderList=e;const t=this.$refs.delOrderModal;t.openModal()},delOrder(){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/admin/order/${this.orderList.id}/`,t=this.$refs.delOrderModal;this.$http.delete(e).then((()=>{this.getOrderList(),t.hideModal(),this.isLoading=!1})).catch((e=>{console.dir(e),this.isLoading=!1}))}},mounted(){},created(){this.getOrderList()}};const ve=(0,te.Z)(Le,[["render",_]]);var ye=ve}}]);
//# sourceMappingURL=251.0ed04ad3.js.map