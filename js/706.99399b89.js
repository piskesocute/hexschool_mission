"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[706],{422:function(t,e,a){function s(t){return{all:t=t||new Map,on:function(e,a){var s=t.get(e);s?s.push(a):t.set(e,[a])},off:function(e,a){var s=t.get(e);s&&(a?s.splice(s.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var s=t.get(e);s&&s.slice().map((function(t){t(a)})),(s=t.get("*"))&&s.slice().map((function(t){t(e,a)}))}}}a.d(e,{Z:function(){return n}});const i=s();var n=i},4706:function(t,e,a){a.r(e),a.d(e,{default:function(){return K}});var s=a(3396),i=a(7139),n=a(9242);const c=(0,s._)("h1",null,"cart",-1),o={class:"container"},d={class:"text-end"},l={class:"table align-middle"},r=(0,s._)("thead",null,[(0,s._)("tr",{class:"text-center"},[(0,s._)("th",{width:"5%"}),(0,s._)("th",{width:"10%"},"圖片"),(0,s._)("th",{width:"35%"},"品名"),(0,s._)("th",{width:"10%"},"售價"),(0,s._)("th",{width:"10%"},"單價"),(0,s._)("th",{width:"10%"},"折扣"),(0,s._)("th",{width:"10%"},"數量/單位"),(0,s._)("th",null,"總價")])],-1),u={class:"d-flex justify-content-center align-items-center"},h=["onClick"],p=(0,s._)("i",{class:"fas fa-spinner fa-pulse"},null,-1),g=(0,s.Uk)(" x "),_=[p,g],m={class:"align-middle"},v={class:"d-flex justify-content-center align-items-center"},f={class:"mx-0 my-auto overflow-hidden"},w=["src"],x={class:"text-center"},y={class:"text-center fs-5"},k={class:"text-center"},L={key:0,class:"text-success"},b={class:"input-group input-group-sm"},C={class:"input-group mb-3"},D=["onUpdate:modelValue","onChange"],I=["value"],z={class:"text-center fs-5"},$=(0,s._)("td",{colspan:"7",class:"text-end"},"總計",-1),q={class:"text-center fs-5"};function U(t,e,a,p,g,U){const Z=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Z,{active:g.isLoading,"z-index":1060},null,8,["active"]),c,(0,s._)("div",o,[(0,s._)("div",d,[(0,s._)("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=t=>U.removeCartItem())}," 清空購物車 ")]),(0,s._)("table",l,[r,(0,s._)("tbody",null,[g.cartData.carts?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(g.cartData.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id},[(0,s._)("td",null,[(0,s._)("div",u,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>U.removeCartItem(t.id)},_,8,h)])]),(0,s._)("td",m,[(0,s._)("div",v,[(0,s._)("div",f,[(0,s._)("img",{style:{"max-height":"80px",display:"block"},src:t.product.imageUrl||t.product.imagesUrl[0],alt:""},null,8,w)])])]),(0,s._)("td",null,(0,i.zw)(t.product.title),1),(0,s._)("td",x,(0,i.zw)(t.product.origin_price),1),(0,s._)("td",y,(0,i.zw)(t.product.price),1),(0,s._)("td",k,[t.product.price-t.product.origin_price!==0?((0,s.wg)(),(0,s.iD)("small",L,"省下：")):(0,s.kq)("",!0),(0,s.Uk)((0,i.zw)(t.product.price-t.product.origin_price),1)]),(0,s._)("td",null,[(0,s._)("div",b,[(0,s._)("div",C,[(0,s.wy)((0,s._)("select",{class:"form-select",id:"","onUpdate:modelValue":e=>t.qty=e,onChange:e=>U.updateCartItem(t)},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(10,(t=>(0,s._)("option",{value:t,key:t+"12312341323"},(0,i.zw)(t),9,I))),64))],40,D),[[n.bM,t.qty]])])])]),(0,s._)("td",z,(0,i.zw)(t.total),1)])))),128)):(0,s.kq)("",!0)]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[$,(0,s._)("td",q,(0,i.zw)(g.cartData.final_total),1)])])])])],64)}var Z=a(422),H={data(){return{data:[],product:{},cartData:{},page:"1",modal:{},productId:"",orderData:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},methods:{getCartItem(){this.isLoading=!0,this.$http("https://vue3-course-api.hexschool.io/v2/api/evan-classuse/cart").then((t=>{this.cartData=t.data.data,this.isLoading=!1})).catch((t=>{console.dir(t),this.isLoading=!1}))},removeCartItem(t){this.isLoading=!0;let e=`cart/${t}`;"string"!==typeof t&&(e="carts"),this.$http.delete(`https://vue3-course-api.hexschool.io/v2//api/evan-classuse/${e}`).then((()=>{Z.Z.emit("get-cart"),this.getCartItem(),this.isLoading=!1})).catch((t=>{console.dir(t),this.isLoading=!1}))},updateCartItem(t){this.isLoading=!0;const e={product_id:t.id,qty:t.qty};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/evan-classuse/cart/${t.id}`,{data:e}).then((()=>{this.getCartItem(),this.isLoading=!1})).catch((t=>{console.dir(t),this.isLoading=!1}))},getproduct(){this.isLoading=!0,this.$http("https://vue3-course-api.hexschool.io/v2/api/evan-classuse/products/all").then((t=>{this.data=t.data.products,this.isLoading=!1})).catch((t=>{console.dir(t),this.isLoading=!1}))},addToCart(t,e=1){this.isLoading=!0;const a={product_id:t,qty:e};this.$http.post("https://vue3-course-api.hexschool.io/v2/api/evan-classuse/cart",{data:a}).then((()=>{Z.Z.emit("get-cart"),this.isLoading=!1})).catch((t=>{console.dir(t),this.isLoading=!1}))}},mounted(){this.getproduct(),this.getCartItem()}},Y=a(89);const j=(0,Y.Z)(H,[["render",U]]);var K=j}}]);
//# sourceMappingURL=706.99399b89.js.map